{% load static %}
<!doctype html>
<html>
<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
<div class="container">
  <h1>Dashboard</h1>
  {% if paid %}
    <h4>Upload file</h4>
    <form method="post" enctype="multipart/form-data" action="{% url 'file-upload' %}">
      {% csrf_token %}
      <input type="file" name="file" accept=".txt,.docx" required>
      <button class="btn btn-primary">Upload</button>
    </form>
  {% else %}
    <p>You must pay ৳100 to enable upload.</p>
    <form method="post" action="{% url 'initiate-payment' %}">
      {% csrf_token %}
      <button class="btn btn-success">Pay ৳100 (aamarPay sandbox)</button>
    </form>
  {% endif %}

  <hr>
  <h3>Your uploads</h3>
  <table class="table">
    <thead><tr><th>File</th><th>Words</th><th>Status</th></tr></thead>
    <tbody>
      {% for f in files %}
        <tr>
          <td>{{ f.filename }}</td>
          <td>{{ f.word_count }}</td>
          <td>{{ f.status }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
</body>
</html>
